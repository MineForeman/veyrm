# Phase 7.2: Status Bar

## Overview
The Status Bar provides real-time game state information to the player, including health, position, turn count, and other vital statistics. It serves as the primary heads-up display for monitoring character status and game progression.

## Current Status: ✅ ALREADY IMPLEMENTED

The Status Bar functionality has already been implemented as part of the game screen layout. This documentation captures the existing implementation and identifies potential enhancements.

## Existing Implementation

### Core Features Already Working

- ✅ Status bar component created in `CreateStatusPanel()`
- ✅ HP display with current/max values
- ✅ Turn counter from TurnManager
- ✅ World time display
- ✅ Depth level indicator
- ✅ Debug mode FPS counter
- ✅ Real-time updates on each render frame
- ✅ FTXUI border and sizing

### Current Architecture

```cpp
Component GameScreen::CreateStatusPanel() {
    return Renderer([this] {
        std::vector<Element> status_elements = {
            text("HP: " + std::to_string(player_hp) + "/" + 
                 std::to_string(player_max_hp)) | bold,
            separator(),
            text("Turn: " + std::to_string(tm->getCurrentTurn())),
            separator(),
            text("Time: " + std::to_string(tm->getWorldTime())),
            separator(),
            text("Depth: 1")
        };
        
        // Debug mode additions
        if (game_manager->isDebugMode()) {
            status_elements.push_back(text(fps_info));
        }
        
        return hbox(status_elements) | border | size(HEIGHT, EQUAL, 3);
    });
}
```

## What's Already Done

### Information Display

- **HP Status**: Current/Max HP with bold formatting
- **Turn Counter**: Current turn number from TurnManager
- **World Time**: Game time tracking
- **Depth Level**: Current dungeon depth (hardcoded to 1 for now)
- **FPS Counter**: Frame rate display in debug mode

### Visual Design

- **Layout**: Horizontal box with separators between elements
- **Formatting**: Bold HP text for emphasis
- **Border**: FTXUI border around status panel
- **Sizing**: Fixed height of 3 lines

### Integration

- Integrated with GameScreen layout system
- Updates automatically on each render frame
- Pulls data from GameManager and TurnManager
- Positioned in upper-right of game layout

## Missing Features (Per Original Requirements)

### Position Display ❌

The original requirement specified displaying the player's position, but this is not currently shown in the status bar. This could be added as:

```cpp
text("Pos: " + std::to_string(player_x) + "," + 
     std::to_string(player_y))
```

### HP Color Coding ❌

The original requirement specified color coding for HP levels, but this is not currently implemented. Suggested implementation:

```cpp
Color getHPColor(int current, int max) {
    float ratio = (float)current / max;
    if (ratio > 0.75) return Color::Green;
    if (ratio > 0.25) return Color::Yellow;
    return Color::Red;
}
```

## Potential Enhancements (Not Required for MVP)

### Additional Statistics

- [ ] Experience/Level display
- [ ] Gold/Currency counter
- [ ] Status effects indicators
- [ ] Equipment summary
- [ ] Hunger/Satiation meter

### Visual Improvements

- [ ] HP bar visualization (████░░░░)
- [ ] Animated value changes
- [ ] Icon support for stats
- [ ] Configurable layout options

### Advanced Features

- [ ] Tooltip support for detailed info
- [ ] Clickable elements for quick actions
- [ ] Mini-map integration
- [ ] Alert notifications for critical states

## Usage Example

The status bar is automatically created and managed by the GameScreen:

```cpp
// In GameScreen::Create()
auto status_panel = CreateStatusPanel();

// Included in main layout
auto layout = Container::Vertical({
    Container::Horizontal({
        map_panel,
        Container::Vertical({
            status_panel,  // Status bar here
            log_panel
        })
    })
});
```

## Files Involved

### Existing Files

- `src/game_screen.cpp` - Status panel implementation
- `include/game_screen.h` - GameScreen class definition
- `include/game_state.h` - GameManager with player stats
- `include/turn_manager.h` - Turn and time tracking

## Testing Considerations

### Current Testing

- Status bar updates verified through visual inspection
- Integration tested through gameplay
- FPS counter tested in debug mode

### Recommended Tests

- [ ] HP color changes at different thresholds
- [ ] Position updates when player moves
- [ ] Turn counter increments correctly
- [ ] Time formatting at various values

## Completion Assessment

### Implemented Features

- ✅ Status bar component (100%)
- ✅ HP display (100%)
- ❌ Position display (0% - not implemented)
- ✅ Turn count display (100%)
- ❌ HP color coding (0% - not implemented)
- ✅ Real-time updates (100%)

### Overall Completion: ~60%

The status bar exists and functions, but lacks two specified features:
1. Player position display
2. HP color coding based on health levels

## Recommended Actions

To fully complete Phase 7.2:

1. **Add Position Display**:
   - Show player coordinates in status bar
   - Format as "Pos: X,Y" or similar

2. **Implement HP Color Coding**:
   - Green for healthy (>75%)
   - Yellow for wounded (25-75%)
   - Red for critical (<25%)

3. **Update Tests**:
   - Add unit tests for color calculation
   - Verify position updates correctly

These additions would bring the implementation to 100% compliance with the original requirements.